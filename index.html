<!DOCTYPE html>
<html>
  <head>
    <title> Home Questionaire </title>
    
   <!-- Adobe Target settings, allows cookies on all subdomains -->
   <script>
      window.targetGlobalSettings = {
      cookieDomain: "ladanazita.github.io"
    }
   </script>
    
   <!-- Adobe Target at.js, must be included in the head! -->
   <script src="at.js"></script>
    
    <!-- ajs -->
    <script src="analytics.js"></script>

    
  </head>
  <body>
    <br>
    <h1> What is your favorite place to travel? </h1>
    <p> I am building a directory of sweet travel destinations.</p>
    <br></br>
    <form name="travel" onsubmit="identify(event)">
    What is your favorite travel destination?
    <br></br>
    <input name="destination" required="" size="81" type="text" />
    <br><br><br>
    Any recommendations (cool things to do, places to visit or restaurants to eat)?
    <br><br>
    <textarea cols="81" name="details" required="" rows="10"></textarea>
    <br><br>
    Name:
    <input name="fullname" required="" size="75" type="text" />
    <br><br>
    Email:
    <input name="email" required="" size="75" type="email"/>
    <br><br><br>
    <input name="submit" type="submit" value="submit" />
    <br><br>
    </form>

    <!--Identify Users and Track an Event-->
    <script type="text/javascript">
      function identify(e){
        e.preventDefault();
        var form = e.target;
        var email = form["email"].value;
        var fullname = form["fullname"].value;
        var destination = form["destination"];
        var details = form["details"].value;
        var user = {email: email, name: fullname, destination: destination, details: details}
        analytics.identify(email, {email: email, name: fullname});
        analytics.track('destination submitted', user, function() {
          window.location.href ="";
        });
      }
      
    // Validating which event to use.
      document.addEventListener(adobe.target.event.REQUEST_SUCCEEDED, function(event) {
        console.log('Event', event);
        analytics.track('Request Succeeded');
      });
      document.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED, function(event) {
        console.log('Event', event);
        analytics.track('Experiment Content Rendered');
      });
      
      // Generic Custom Event. `mbox` is a required field.
      adobe.target.trackEvent({
        "mbox": "target-global-mbox",
        "params": {
            "param1": "value1"
        }
      });
      
      // Order Completed Event. Tracks revenue in Adobe Target.
      adobe.target.trackEvent({
          "mbox": "orderConfirmPage",
          "params":{ 
              "orderId": 1234, 
              "orderTotal": 5678, 
              "productPurchasedId": 91011 
          }
      });
    </script>
  </body>
</html>
